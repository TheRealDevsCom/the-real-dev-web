---
import BaseLayout from "~/layouts/BaseLayout.astro";
import ContactForm from "~/components/contact-form.astro";
import ContentSection from "~/components/content-section.astro";
import SpriteIcon from "~/components/sprite-icon.astro";
import { Icon } from "astro-icon/components";
---

<BaseLayout
    title="Contacto - TheRealDevs"
    description="Contáctanos para cotizar tu proyecto o agendar una reunión. Estamos listos para ayudarte a hacer realidad tus ideas."
>
    <div class="animate-fadeIn space-y-24 px-8 py-32">
        <ContentSection title="Contáctanos" id="contacto">
            <SpriteIcon
                slot="eyebrow"
                name="logomark"
                lightName="logomarkLight"
                class="size-72 animate-scaleIn"
                id="logo-contacto"
            />
            <Fragment slot="lead">
                ¿Tienes un proyecto en mente? <span class="text-primary"
                    >Hablemos</span
                >. Estamos listos para <span class="text-primary">ayudarte</span
                > a hacer realidad tus ideas.
            </Fragment>

            <ContactForm />

            <!-- Contact Information -->
            <div class="mt-16 grid gap-8 md:grid-cols-3">
                <div
                    class="group flex animate-slideUp flex-col items-center gap-4 rounded-lg border border-default bg-offset p-6 transition-all duration-300 hover:scale-105 hover:border-primary hover:shadow-xl"
                    style="animation-delay: 0ms;"
                >
                    <div
                        class="group-hover:bg-primary/10 rounded-full border-2 border-primary p-4 transition-all duration-300 group-hover:scale-110"
                    >
                        <Icon
                            name="mdi:email"
                            class="size-8 text-primary transition-transform duration-300 group-hover:rotate-12"
                        />
                    </div>
                    <h3 class="font-bold text-xl">Email</h3>
                    <a
                        href="mailto:contacto@therealdevs.com"
                        class="text-primary hover:underline"
                    >
                        contacto@therealdevs.com
                    </a>
                </div>

                <div
                    class="group flex animate-slideUp flex-col items-center gap-4 rounded-lg border border-default bg-offset p-6 transition-all duration-300 hover:scale-105 hover:border-primary hover:shadow-xl"
                    style="animation-delay: 100ms;"
                >
                    <div
                        class="group-hover:bg-primary/10 rounded-full border-2 border-primary p-4 transition-all duration-300 group-hover:scale-110"
                    >
                        <Icon
                            name="mdi:phone"
                            class="size-8 text-primary transition-transform duration-300 group-hover:rotate-12"
                        />
                    </div>
                    <h3 class="font-bold text-xl">Teléfono</h3>
                    <a
                        href="tel:+50588888888"
                        class="text-primary hover:underline"
                    >
                        +505 8888-8888
                    </a>
                </div>

                <div
                    class="group flex animate-slideUp flex-col items-center gap-4 rounded-lg border border-default bg-offset p-6 transition-all duration-300 hover:scale-105 hover:border-primary hover:shadow-xl"
                    style="animation-delay: 200ms;"
                >
                    <div
                        class="group-hover:bg-primary/10 rounded-full border-2 border-primary p-4 transition-all duration-300 group-hover:scale-110"
                    >
                        <Icon
                            name="mdi:map-marker"
                            class="size-8 text-primary transition-transform duration-300 group-hover:rotate-12"
                        />
                    </div>
                    <h3 class="font-bold text-xl">Ubicación</h3>
                    <p class="text-center">Managua, Nicaragua</p>
                </div>
            </div>
        </ContentSection>
    </div>
</BaseLayout>

<script is:inline>
    const waitForLogo = () => {
        return new Promise((resolve) => {
            const check = () => {
                const useEl = document.querySelector("#logo-contacto use");
                if (useEl) {
                    resolve(useEl);
                } else {
                    requestAnimationFrame(check);
                }
            };
            check();
        });
    };

    const updateIntroLogo = async () => {
        const logo = await waitForLogo();

        const theme = document.documentElement.dataset.theme;
        const isLight = theme === "light";

        logo.setAttribute(
            "href",
            isLight ? "/sprite.svg#logomarkLight" : "/sprite.svg#logomark",
        );
    };

    // Observa cambios de tema
    const observer = new MutationObserver((mutations) => {
        for (const mutation of mutations) {
            if (
                mutation.type === "attributes" &&
                mutation.attributeName === "data-theme"
            ) {
                updateIntroLogo();
            }
        }
    });

    observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ["data-theme"],
    });

    // Inicial
    updateIntroLogo();
</script>
